env = HYPRCURSOR_SIZE, 32
env = XCURSOR_SIZE, 32

env = LIBVA_DRIVER_NAME, nvidia
env = XDG_SESSION_TYPE, wayland
env = GBM_BACKEND, nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME, nvidia
env = NVD_BACKEND, direct
env = MOZ_DISABLE_RDD_SANDBOX, 1

env = ELECTRON_OZONE_PLATFORM_HINT,auto

$hypr_dir = ~/.config/hypr
$config = $hypr_dir/config

exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = swayidle -w before-sleep 'swaylock -f'

source = ./settings.conf
source = ./monitors.conf
source = ./workspaces.conf
source = ./monitor_binds.conf

$rofi = rofi -config $config/rofi/config.rasi
$swaylock = swaylock -C $config/swaylock/config

#$wl-paste = wl-paste --watch cliphist store & wl-paste -t text --watch xclip -selection clipboard
$swww-daemon = swww-daemon --format xrgb
$waybar = hyprctl monitors -j | jq --raw-output --argjson ident $main_monitor '.[] | select(.$monitor_key == $ident).name' | xargs -I{} jq --arg monitor {} 'select(.output == "main_monitor").output = $monitor' $config/waybar/config.json > /tmp/waybar_config && waybar -c /tmp/waybar_config -s $config/waybar/style.css
$swaync = swaync -c $config/swaync/config.json -s $config/swaync/style.css
$swayosd-server = swayosd-server --top-margin 0.05 -s $config/swayosd/style.css

$load = $swww-daemon & $waybar & $swaync & $swayosd-server
$kill = wl-paste swww-daemon waybar swaync swayosd-server

exec-once = $load
exec-once = dex -a

general {
    border_size = 3
    no_border_on_floating = true
    gaps_in = 5
    gaps_out = 22
    col.active_border = rgb(aaccff) rgb(ccaaff)
    col.inactive_border = rgba(00000000)

    layout = master

    allow_tearing = false
}

decoration {
    rounding = 20

    drop_shadow = true
    shadow_range = 100
    shadow_render_power = 4
    col.shadow = rgba(00000060)
    col.shadow_inactive = rgba(00000000)

    blur {
        enabled = yes
        size = 2
        passes = 5
        contrast = 1.1
        vibrancy = 0.4
    }
}

animations {
    enabled = yes

    bezier = exp, 0.19, 1, 0.2, 1
    bezier = linear, 0, 0, 1, 1

    animation = windows, true, 5, exp
    animation = windowsOut, true, 6, exp, popin 65%
    animation = border, true, 5, exp
    animation = borderangle, true, 20, linear, loop
    animation = fade, true, 5, default
    animation = fadeIn, false
    animation = fadeOut, true, 2, exp
    animation = workspaces, true, 6, exp#, slidevert
}

input {
    kb_layout = us, cz
    kb_variant = , qwerty
    kb_options = grp:win_space_toggle

    numlock_by_default = true

    sensitivity = -0

    follow_mouse = 1

    touchpad {
        natural_scroll = no
    }

    tablet {
        output = $main_monitor
    }
}

gestures {
    workspace_swipe = true
}

master {
	new_on_top = true
}

misc {
    disable_hyprland_logo = true
    enable_swallow = true
}

xwayland {
  force_zero_scaling = true
}

cursor {
    no_hardware_cursors = true
    default_monitor = $main_monitor
}

windowrule = float, ^(org.gnome.Calculator)$
windowrulev2 = noborder, onworkspace:w[t1]
#windowrulev2 = noborder, focus:0
windowrulev2 = noshadow, floating:0

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
bindm = $mainMod CTRL, mouse:273, resizewindow 1

bind = $mainMod, s, exec, hyprctl activewindow -j | jq .pid | xargs kill -STOP
bind = $mainMod, c, exec, hyprctl activewindow -j | jq .pid | xargs kill -CONT
bind = $mainMod, return, exec, sh -c '$term'
bind = $mainMod SHIFT, C, killactive,
bind = $mainMod SHIFT, Q, exit,
bind = $mainMod, T, togglefloating,
bind = $mainMod SHIFT, T, pin,

bind = $mainMod SHIFT, d, exec, nwg-displays -n 20
bind = $mainMod, n, exec, swaync-client -t

bind = $mainMod, F, fullscreen, 0
bind = $mainMod, G, fullscreen, 1

bind = $mainMod, F1, exec, $swaylock
bind = $mainMod, O, exec, $rofi -show drun
bind = $mainMod, P, exec, $rofi -show run
bind = $mainMod, V, exec, cliphist list | $rofi -dmenu | cliphist decode | wl-copy
bind = $mainMod SHIFT, R, exec, killall $kill; $load

#bindl = $mainMod, Y, exec, hyprctl switchxkblayout $keyboard next
bind = , print, exec, slurp | grim -g - - | swappy -f -
bind = SHIFT, print, exec, hyprctl -j monitors | jq -r '.[] | select(."focused"==true).name' | xargs -I{} grim -o {} - | swappy -f -

binde = $mainMod, H, resizeactive, -30 0
binde = $mainMod, L, resizeactive, 30 0

bind = $mainMod, J, cyclenext, prev
bind = $mainMod, K, cyclenext
bind = $mainMod SHIFT, J, layoutmsg, swapnext
bind = $mainMod SHIFT, K, layoutmsg, swapprev

bindle = , XF86AudioRaiseVolume, exec, swayosd-client --output-volume +2
bindle = , XF86AudioLowerVolume, exec, swayosd-client --output-volume -2
bindle = , XF86MonBrightnessUp, exec, swayosd-client --brightness raise
bindle = , XF86MonBrightnessDown, exec, swayosd-client --brightness lower
bindl = , XF86AudioMute, exec, swayosd-client --output-volume mute-toggle
bindl = , XF86AudioMicMute, exec, swayosd-client --input-volume mute-toggle
bindr = CAPS, Caps_Lock, exec, swayosd-client --caps-lock

